pipeline {
    agent {
        kubernetes {
            label 'python-pod'
            inheritFrom 'dso-default'
            defaultContainer 'python'
            containers {
                containerTemplate(
                    name: 'python',
                    image: 'dockerdso-dev.techcombank.com.vn/dso/python-3.8:stable',
                    command: '',
                    ttyEnabled: true
                )
            }
        }
    }

    stages {
        stage('Run Python Script') {
            steps {
                container('python') {
                    script {
                        // Print Python version to confirm the environment
                        sh 'python --version'
                        
                        // Write a simple Python script to a file
                        writeFile file: 'your_script.py', text: '''
                        print("Hello, World!")
                        '''
                        
                        // Execute the Python script
                        sh 'python your_script.py'
                    }
                }
            }
        }
    }

    post {
        always {
            // Clean up after the pipeline
            echo 'Pipeline finished.'
        }
        success {
            echo 'Pipeline completed successfully.'
        }
        failure {
            echo 'Pipeline failed.'
        }
    }
}
